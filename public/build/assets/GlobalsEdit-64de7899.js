import{T as B,o as I,a as y,b as k,d as i,u as e,_ as o,Z as T,e as p,f as s,t as n,j as U,n as u,h as r,i as C,F as v,l as S,g as O,m as _,y as h,p as E}from"./app-2bcc9048.js";import{_ as N}from"./GoBackNavLink-2bbaee9a.js";import{_ as q}from"./OrgTabs-d8c498e2.js";import{_ as c}from"./InputLabel-8fa952b5.js";import{_ as b}from"./TextInput-43ff59ef.js";import{_ as m}from"./InputError-7685150a.js";import{P as $}from"./PrimaryButton-f7253fde.js";import{S as w}from"./sweetalert2-50e64164.js";/* empty css             */import{i as j}from"./index-7c2e6872.js";import{_ as g}from"./ToolTip-507831a1.js";import{_ as A}from"./Card-02b1dfac.js";import{_ as D}from"./Notice-1632501c.js";import{u as W}from"./switch-0dd60fac.js";import"./_plugin-vue_export-helper-c27b6911.js";const G={class:"py-8"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"card-header !mb-6"},Y={class:"mt-2"},J={class:"underline text-purple-500 text-sm",target:"_blank",href:"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"},L={class:"mt-2"},Z={class:"block"},H={class:"mt-1"},K={key:0,class:"block text-xs"},Q={class:"mt-2"},R={class:"mt-2"},X={class:"mt-2"},ee={class:"mt-2"},le={class:"mt-2"},se={class:"mt-2"},ae={class:"ul-checkbox mt-1",dir:"ltr"},oe={class:"li-checkbox"},te={class:"flex items-center pl-3"},ie={for:"saturday-checkbox",class:"li-checkbox-label"},ne={class:"li-checkbox"},re={class:"flex items-center pl-3"},de={for:"sunday-checkbox",class:"li-checkbox-label"},ue={class:"li-checkbox"},me={class:"flex items-center pl-3"},ce={for:"monday-checkbox",class:"li-checkbox-label"},pe={class:"li-checkbox"},fe={class:"flex items-center pl-3"},be={for:"tuesday-checkbox",class:"li-checkbox-label"},_e={class:"li-checkbox"},he={class:"flex items-center pl-3"},ye={for:"wednesday-checkbox",class:"li-checkbox-label"},ge={class:"li-checkbox"},xe={class:"flex items-center pl-3"},ke={for:"thursday-checkbox",class:"li-checkbox-label"},ve={class:"w-full dark:border-gray-600"},we={class:"flex items-center pl-3"},ze={for:"friday-checkbox",class:"li-checkbox-label"},Ve={class:"flex items-center justify-end mt-4"},We={__name:"GlobalsEdit",props:{globals:Object},setup(z){const d=z,l=B({organization_name:d.globals.organization_name,timezone:d.globals.timezone,is_ip_based:d.globals.is_ip_based,ip:d.globals.is_ip_based?JSON.parse(d.globals.ip).join(", "):"",email:d.globals.email,organization_address:d.globals.organization_address,absence_limit:d.globals.absence_limit,payroll_day:d.globals.payroll_day,weekend_off_days:JSON.parse(d.globals.weekend_off_days),income_tax:d.globals.income_tax}),V=()=>{w.mixin({customClass:{confirmButton:"mx-4 text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900",cancelButton:"text-white bg-gray-500 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-900"},buttonsStyling:!1}).fire({title:o("Are you sure?"),text:o("Globals data is central to this application data integrity!"),icon:"warning",showCancelButton:!0,confirmButtonText:o("Yes, Confirm!"),cancelButtonText:o("No, Cancel!"),reverseButtons:!0}).then(a=>{a.isConfirmed&&(l.ip!==null&&!Array.isArray(l.ip)&&(l.ip=l.ip.split(",").map(t=>t.trim()).filter(t=>t!==null&&t!=="")),l.put(route("globals.update"),{preserveScroll:!0,onError:()=>{E().error(o("Error Editing Globals"))},onSuccess:()=>{w.fire(o("Global Data Changed Successfully"),"","success")}}))})};async function P(){l.ip="Fetching IP, Please Wait...",fetch("https://api.ipify.org/?format=json").then(f=>{if(!f.ok)throw new Error("Network response was not ok");return f.json()}).then(f=>{l.ip=f.ip}).catch(f=>{console.error("Error fetching IP:",f.message)})}return I(()=>{j()}),(f,a)=>(y(),k(v,null,[i(e(T),{title:e(o)("Edit Organization Data")},null,8,["title"]),i(N,null,{tabs:p(()=>[i(q)]),default:p(()=>[s("div",G,[s("div",F,[i(A,{class:"!mt-0"},{default:p(()=>[s("h1",M,n(e(o)("Edit Organization Data")),1),i(D,{type:"warning",bold:e(o)("Warning!"),br:"",text:e(o)("Changing timezone in production can cause unexepected behavior in the attendance system")+". "+e(o)("Please revise the attendance list of the current week after changing the timezone")+"."},null,8,["bold","text"]),s("form",{onSubmit:U(V,["prevent"])},[s("div",null,[i(c,{for:"organization_name",value:e(o)("Organization Name")},null,8,["value"]),i(b,{id:"organization_name",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.organization_name}]),modelValue:e(l).organization_name,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).organization_name=t),required:"",autocomplete:"off",placeholder:e(o)("Organization Name")},null,8,["class","modelValue","placeholder"]),i(m,{class:"mt-2",message:e(l).errors.organization_name},null,8,["message"])]),s("div",Y,[i(c,{for:"timezone",value:e(o)("Time Zone"),class:"inline"},null,8,["value"]),s("a",J,n(" "+e(o)("(list)")),1),i(g,null,{default:p(()=>[r(n(e(o)("This is the timezone that will be used to calculate the time related data in the application."))+" ",1),a[17]||(a[17]=s("br",null,null,-1)),r(" "+n(e(o)("Please choose a timezone from the list.")),1)]),_:1}),i(b,{id:"timezone",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.timezone}]),modelValue:e(l).timezone,"onUpdate:modelValue":a[1]||(a[1]=t=>e(l).timezone=t),required:"",autocomplete:"off",placeholder:"Africa/Cairo"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.timezone},null,8,["message"])]),s("div",L,[i(c,{class:"inline",for:"is_remote",value:e(o)("Enable IP-Based Attendance?")},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(o)("The set IPs will be used to compare employee attendance's IP with it"))+". ",1),a[18]||(a[18]=s("br",null,null,-1)),r(" "+n(e(o)("If the IPs mismatch, it means the employee is registering their attendance"))+" ",1),a[19]||(a[19]=s("br",null,null,-1)),r(" "+n(e(o)("from outside the organization. Thus, the attendance will be discarded"))+".",1),a[20]||(a[20]=s("br",null,null,-1)),r(" "+n(e(o)("You can turn this option off on this page"))+". ",1)]),_:1}),s("div",Z,[i(e(W),{dir:"ltr",modelValue:e(l).is_ip_based,"onUpdate:modelValue":a[2]||(a[2]=t=>e(l).is_ip_based=t),class:u([e(l).is_ip_based?"bg-purple-600":"bg-gray-400","col-span-4 mt-2 relative inline-flex h-6 w-11 items-center rounded-full"])},{default:p(()=>[s("span",{class:u([e(l).is_ip_based?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"])]),i(m,{class:"mt-2",message:e(l).errors.is_ip_based},null,8,["message"])]),s("div",H,[i(c,{for:"ip",value:e(o)("Organization Public IP Address(es) - Separate multiple values by commas"),class:"inline"},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(o)("This IP(s) will be used to compare employee attendance's IP with it."))+" ",1),a[21]||(a[21]=s("br",null,null,-1)),r(" "+n(e(o)("If the IPs mismatch, it means the employee is registering their attendance"))+" ",1),a[22]||(a[22]=s("br",null,null,-1)),r(" "+n(e(o)("from outside the organization. Thus, the attendance will be discarded.")),1),a[23]||(a[23]=s("br",null,null,-1)),r(" "+n(e(o)("You can turn this option off on this page"))+".",1),a[24]||(a[24]=s("br",null,null,-1)),r(" "+n(e(o)("Note: Supports IPv4 Only"))+". ",1)]),_:1}),e(l).is_ip_based?(y(),k("span",K,[s("a",{onClick:a[3]||(a[3]=t=>P()),class:"underline text-purple-500",href:"#"},n(e(o)("Grab Yours from Here,")),1),r(" "+n(e(o)("and make sure you are at your organization while setting this value, otherwise, all employee attendances will be rejected even if they are inside the organization."))+" ",1),a[25]||(a[25]=s("br",null,null,-1)),r(" "+n(e(o)("If this app is hosted locally, you can use '192.168.1.*'")),1)])):C("",!0),i(b,{id:"timezone",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.ip,"opacity-75 bg-gray-100 cursor-not-allowed":!e(l).is_ip_based}]),disabled:!e(l).is_ip_based,modelValue:e(l).ip,"onUpdate:modelValue":a[4]||(a[4]=t=>e(l).ip=t),required:"",autocomplete:"off",placeholder:"193.107.235.96"},null,8,["class","disabled","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.ip},null,8,["message"]),(y(!0),k(v,null,S(Object.keys(e(l).errors).filter(t=>t.startsWith("ip")).reduce((t,x)=>(t[x]=e(l).errors[x],t),{}),(t,x)=>(y(),O(m,{message:t},null,8,["message"]))),256))]),s("div",Q,[i(c,{for:"email",value:e(o)("Organization Email")},null,8,["value"]),i(b,{id:"email",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.email}]),modelValue:e(l).email,"onUpdate:modelValue":a[5]||(a[5]=t=>e(l).email=t),required:"",autocomplete:"off",placeholder:"ceo@oraby.com"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.email},null,8,["message"])]),s("div",R,[i(c,{for:"organization_address",value:e(o)("Organization Address")},null,8,["value"]),i(b,{id:"organization_address",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.organization_address}]),modelValue:e(l).organization_address,"onUpdate:modelValue":a[6]||(a[6]=t=>e(l).organization_address=t),required:"",autocomplete:"off",placeholder:e(o)("114 Juhayna Sq. 6th of October City, Giza, Egypt")},null,8,["class","modelValue","placeholder"]),i(m,{class:"mt-2",message:e(l).errors.organization_address},null,8,["message"])]),s("div",X,[i(c,{for:"absence_limit",value:e(o)("Absence Limit")},null,8,["value"]),i(b,{id:"absence_limit",type:"number",min:"1",max:"365",step:"1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.absence_limit}]),modelValue:e(l).absence_limit,"onUpdate:modelValue":a[7]||(a[7]=t=>e(l).absence_limit=t),required:"",autocomplete:"off",placeholder:"8"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.absence_limit},null,8,["message"])]),s("div",ee,[i(c,{for:"payroll_day",value:e(o)("Payroll Day"),class:"inline"},null,8,["value"]),i(g,null,{default:p(()=>[r(n(e(o)("Which day should the salaries be paid on. Payrolls will be generated automatically that day on 00:00."))+" ",1),a[26]||(a[26]=s("br",null,null,-1)),r(" "+n(e(o)("The generated payrolls account for the previous month's work, from day 1 until the end of the previous month.")),1)]),_:1}),i(b,{id:"payroll_day",type:"number",min:"1",max:"31",step:"1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.payroll_day}]),modelValue:e(l).payroll_day,"onUpdate:modelValue":a[8]||(a[8]=t=>e(l).payroll_day=t),required:"",autocomplete:"off",placeholder:"8"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.payroll_day},null,8,["message"])]),s("div",le,[i(c,{for:"income_tax",value:e(o)("Income Tax Percentage")},null,8,["value"]),i(b,{id:"income_tax",type:"number",min:"0",max:"100",step:"0.1",class:u(["mt-1 block w-full",{"border border-red-500":e(l).errors.income_tax}]),modelValue:e(l).income_tax,"onUpdate:modelValue":a[9]||(a[9]=t=>e(l).income_tax=t),required:"",autocomplete:"off",placeholder:"14"},null,8,["class","modelValue"]),i(m,{class:"mt-2",message:e(l).errors.income_tax},null,8,["message"])]),s("div",se,[i(c,{for:"weekend_off_days",value:e(o)("Weekend Off Days")},null,8,["value"]),s("ul",ae,[s("li",oe,[s("div",te,[_(s("input",{id:"saturday-checkbox",type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=t=>e(l).weekend_off_days=t),value:"saturday",class:"li-checkbox-input",checked:""},null,512),[[h,e(l).weekend_off_days]]),s("label",ie,n(e(o)("Saturday")),1)])]),s("li",ne,[s("div",re,[_(s("input",{id:"sunday-checkbox",type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=t=>e(l).weekend_off_days=t),value:"sunday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",de,n(e(o)("Sunday")),1)])]),s("li",ue,[s("div",me,[_(s("input",{id:"monday-checkbox",type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=t=>e(l).weekend_off_days=t),value:"monday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",ce,n(e(o)("Monday")),1)])]),s("li",pe,[s("div",fe,[_(s("input",{id:"tuesday-checkbox",type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=t=>e(l).weekend_off_days=t),value:"tuesday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",be,n(e(o)("Tuesday")),1)])]),s("li",_e,[s("div",he,[_(s("input",{id:"wednesday-checkbox",type:"checkbox","onUpdate:modelValue":a[14]||(a[14]=t=>e(l).weekend_off_days=t),value:"wednesday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",ye,n(e(o)("Wednesday")),1)])]),s("li",ge,[s("div",xe,[_(s("input",{id:"thursday-checkbox",type:"checkbox","onUpdate:modelValue":a[15]||(a[15]=t=>e(l).weekend_off_days=t),value:"thursday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",ke,n(e(o)("Thursday")),1)])]),s("li",ve,[s("div",we,[_(s("input",{id:"friday-checkbox",type:"checkbox","onUpdate:modelValue":a[16]||(a[16]=t=>e(l).weekend_off_days=t),value:"friday",class:"li-checkbox-input"},null,512),[[h,e(l).weekend_off_days]]),s("label",ze,n(e(o)("Friday")),1)])])]),i(m,{class:"mt-2",message:e(l).errors.weekend_off_days},null,8,["message"])]),s("div",Ve,[i($,{class:u(["ltr:ml-4 rtl:mr-4",{"opacity-25":e(l).processing}]),disabled:e(l).processing},{default:p(()=>[r(n(e(o)("Edit Data")),1)]),_:1},8,["class","disabled"])])],32)]),_:1})])])]),_:1})],64))}};export{We as default};
