import{r as C,T as D,a as p,b as x,d as e,u as r,_ as t,Z as j,e as s,f as m,t as u,j as q,g as y,n as B,i as b,h as a,F as T,p as h}from"./app-2bcc9048.js";import{_ as $}from"./GoBackNavLink-2bbaee9a.js";import{_ as A}from"./ReqTabs-3467e4dc.js";import{_ as w,X as N}from"./XIcon-c4505159.js";import{P}from"./PrimaryButton-f7253fde.js";import{S as v}from"./sweetalert2-50e64164.js";import{_ as E}from"./Card-02b1dfac.js";import{C as I}from"./CheckIcon-f1b68884.js";import{D as V,_ as o,a as n,b as i}from"./DD-ac9ff713.js";import{r as W}from"./useRequestTypes-c28efcd5.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"py-8"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"flex justify-between items-center mb-4"},Y={class:"card-header mb-2"},L={key:0,class:"flex inline-flex gap-4"},U={class:"mb-2 ml-1 font-semibold"},re={__name:"RequestView",props:{request:Object},setup(l){const _=l,f=C(""),d=D({status:"",admin_response:""}),k=()=>{v.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure You want to :sth this request?",{sth:f.value}),icon:"warning",showCancelButton:!0,confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),inputLabel:f.value===t("reject")?t("(Optional) Provide a reason for rejecting this request:"):"",input:f.value===t("reject")?"textarea":"",inputPlaceholder:f.value===t("reject")?t("We can't accept this leave this week as Mark and Jose will be off and we will be understaffed."):"",reverseButtons:!0}).then(c=>{c.isConfirmed&&(d.admin_response=f.value===t("reject")?c.value:"",d.put(route("requests.update",{id:_.request.id}),{preserveScroll:!0,onError:()=>{h().error(t("Error Updating Request Status"))},onSuccess:()=>{h().success(t("Request Status Updated Successfully"))}}))})},R=()=>{v.mixin({customClass:{confirmButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",cancelButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure?"),text:t("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonText:t("Yes, Delete!"),cancelButtonText:t("No, Cancel!"),reverseButtons:!0}).then(c=>{c.isConfirmed&&d.delete(route("requests.destroy",{id:_.request.id}),{preserveScroll:!0,onError:()=>{h().error(t("Error Deleting Request"))},onSuccess:()=>{v.fire(t("Request Removed!"),"","success")}})})};return(g,c)=>(p(),x(T,null,[e(r(j),{title:r(t)("Request Data")},null,8,["title"]),e($,null,{tabs:s(()=>[e(A)]),default:s(()=>[m("div",F,[m("div",M,[e(E,{class:"!mt-0"},{default:s(()=>[m("div",null,[m("div",O,[m("h1",Y,u(r(t)("Request #:id Data",{id:l.request.id})),1),g.$page.props.auth.user.roles.includes("admin")?(p(),x("div",L,[m("form",{onSubmit:q(k,["prevent"]),class:"flex gap-4"},[l.request.status!=="Approved"?(p(),y(w,{key:0,text:r(t)("Approve Request"),onClick:c[0]||(c[0]=S=>{r(d).status=1,f.value=r(t)("approve")}),class:B({"opacity-25":r(d).processing}),disabled:r(d).processing},{default:s(()=>[e(I)]),_:1},8,["text","class","disabled"])):b("",!0),l.request.status!=="Rejected"?(p(),y(w,{key:1,text:r(t)("Reject Request"),onClick:c[1]||(c[1]=S=>{r(d).status=2,f.value=r(t)("reject")}),class:B({"opacity-25":r(d).processing}),disabled:r(d).processing},{default:s(()=>[e(N)]),_:1},8,["text","class","disabled"])):b("",!0)],32)])):b("",!0)]),m("h2",U,u(r(t)("Request Info")),1),e(V,null,{default:s(()=>[e(o,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("ID")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.id),1)]),_:1})]),_:1}),e(o,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("Created By")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.employee.name),1)]),_:1})]),_:1}),e(o,null,{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("Request Type")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(r(W)[l.request.type]),1)]),_:1})]),_:1}),e(o,null,{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("Request Message")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.message),1)]),_:1})]),_:1}),e(o,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("From Date")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.start_date),1)]),_:1})]),_:1}),e(o,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("To Date")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.end_date??r(t)("N/A")),1)]),_:1})]),_:1}),e(o,null,{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("Submission Date")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(new Date(_.request.created_at).toISOString().split("T")[0]),1)]),_:1})]),_:1}),e(o,null,{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("Status")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.status==="Pending"?r(t)("Pending")+" ⏳":l.request.status==="Approved"?r(t)("Approved")+" ✅":r(t)("Rejected")+" 🚫"),1)]),_:1})]),_:1}),e(o,{colored:""},{default:s(()=>[e(n,null,{default:s(()=>[a(u(r(t)("Admin Response")),1)]),_:1}),e(i,null,{default:s(()=>[a(u(l.request.admin_response??"-"),1)]),_:1})]),_:1}),e(o,{colored:""},{default:s(()=>[e(n),e(i)]),_:1})]),_:1}),g.$page.props.auth.user.roles.includes("admin")?(p(),x("form",{key:0,onSubmit:q(R,["prevent"]),class:"flex justify-end"},[e(P,{class:"bg-red-600 hover:bg-red-700 ml-4 mt-4 focus:bg-red-500 active:bg-red-900"},{default:s(()=>[a(u(r(t)("Delete Request")),1)]),_:1})],32)):b("",!0)])]),_:1})])])]),_:1})],64))}};export{re as default};
