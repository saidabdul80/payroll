import{a as n,b as w,f as m,o as $,T as L,Q as P,d as e,u as l,_ as a,Z as A,e as t,t as s,g as u,i as v,j as E,n as B,h as r,x as N,F as V,p as C}from"./app-2bcc9048.js";import{_ as j}from"./GoBackNavLink-2bbaee9a.js";import{_ as b}from"./FlexButton-c248a7cd.js";import{a as H}from"./index-7c2e6872.js";import{_ as Y}from"./PayrollTabs-121205cd.js";import{D as z,_ as d,a as c,b as f}from"./DD-ac9ff713.js";import{_ as F}from"./ToolTip-507831a1.js";import{_ as k}from"./Notice-1632501c.js";import{_ as S,X as U}from"./XIcon-c4505159.js";import{S as I}from"./sweetalert2-50e64164.js";import{_ as W}from"./Card-02b1dfac.js";import{M as X}from"./ModifyIcon-40c1375e.js";import{C as q}from"./CheckIcon-f1b68884.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const O={name:"LeftChevronIcon"},Q={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"};function Z(o,y,g,_,i,x){return n(),w("svg",Q,y[0]||(y[0]=[m("path",{"fill-rule":"evenodd",d:"M18 10a.75.75 0 01-.75.75H4.66l2.1 1.95a.75.75 0 11-1.02 1.1l-3.5-3.25a.75.75 0 010-1.1l3.5-3.25a.75.75 0 111.02 1.1l-2.1 1.95h12.59A.75.75 0 0118 10z","clip-rule":"evenodd"},null,-1)]))}const D=M(O,[["render",Z]]),G={name:"RightChevronIcon"},J={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"};function K(o,y,g,_,i,x){return n(),w("svg",J,y[0]||(y[0]=[m("path",{"fill-rule":"evenodd",d:"M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z","clip-rule":"evenodd"},null,-1)]))}const T=M(G,[["render",K]]),ee={class:"py-8"},le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"flex justify-between items-center mb-4"},ae={class:"text-2xl"},oe={key:0,class:"flex inline-flex gap-4"},se={key:0},re={key:1,class:"flex justify-between"},xe={__name:"PayrollView",props:{payroll:Object},setup(o){$(()=>{H()});const y=document.dir==="ltr",g=o,_=g.payroll.currency,i=L({status:""}),x=()=>{I.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:a("Are you sure You want to change the status of this Payroll?"),icon:"question",showCancelButton:!0,confirmButtonText:a("Confirm"),cancelButtonText:a("Cancel"),input:i.status?"checkbox":null,inputValue:1,inputPlaceholder:a("Send an Email to the employee with this payroll update."),reverseButtons:!0}).then(p=>{p.isConfirmed&&i.put(route("payrolls.updateStatus",{id:g.payroll.id,sendEmail:i.status?p.value:0}),{preserveScroll:!0,onError:()=>{C().error(a("Error Updating Status"))},onSuccess:()=>{C().success(a("Status Updated Successfully"))}})})};return $(()=>{P().props.errors.end_of_payrolls&&I.fire({icon:"success",title:P().props.errors.end_of_payrolls})}),(h,p)=>(n(),w(V,null,[e(l(A),{title:l(a)("Payroll Data")},null,8,["title"]),e(j,null,{tabs:t(()=>[e(Y)]),default:t(()=>[m("div",ee,[m("div",le,[e(W,{class:"!mt-0"},{default:t(()=>[m("div",null,[m("div",te,[m("h1",ae,s(l(a)("Payroll Details")),1),h.$page.props.auth.user.roles.includes("admin")?(n(),w("div",oe,[o.payroll.status?v("",!0):(n(),u(b,{key:0,href:h.route("payrolls.edit",{id:o.payroll.id}),text:o.payroll.is_reviewed?l(a)("Review Again"):l(a)("Review Payroll")},{default:t(()=>[e(X)]),_:1},8,["href","text"])),m("form",{onSubmit:E(x,["prevent"])},[o.payroll.is_reviewed&&!o.payroll.status?(n(),u(S,{key:0,text:l(a)("Approve Payroll"),onClick:p[0]||(p[0]=R=>l(i).status=!0),class:B({"opacity-25":l(i).processing}),disabled:l(i).processing},{default:t(()=>[e(q)]),_:1},8,["text","class","disabled"])):o.payroll.is_reviewed&&o.payroll.status?(n(),u(S,{key:1,text:l(a)("Mark as Pending"),onClick:p[1]||(p[1]=R=>l(i).status=!1),class:B({"opacity-25":l(i).processing}),disabled:l(i).processing},{default:t(()=>[e(U)]),_:1},8,["text","class","disabled"])):v("",!0)],32)])):v("",!0)]),h.$page.props.auth.user.roles.includes("admin")?(n(),w("div",se,[o.payroll.is_reviewed?o.payroll.is_reviewed&&!o.payroll.status?(n(),u(k,{key:1,bold:l(a)("This Payroll Has been Reviewed."),text:l(a)("You can approve it now.")},null,8,["bold","text"])):o.payroll.is_reviewed&&o.payroll.status?(n(),u(k,{key:2,bold:l(a)("Processed Payroll."),text:l(a)("This payroll has been reviewed and paid successfully."),type:"success"},null,8,["bold","text"])):v("",!0):(n(),u(k,{key:0,type:"warning",bold:l(a)("This Payroll Has not been reviewed Yet."),br:!0,text:l(a)("You are viewing auto-generated payroll data, which is not final and cannot be approved. Please Review the payroll first, then the option to approve it will appear on this page.")},null,8,["bold","text"]))])):v("",!0),e(z,null,{default:t(()=>[e(d,{colored:""},{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Payroll ID")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(o.payroll.id),1)]),_:1})]),_:1}),e(d,{colored:""},{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Issued for Employee")),1)]),_:1}),e(l(N),{href:h.route("employees.show",{id:o.payroll.employee.id})},{default:t(()=>[e(f,null,{default:t(()=>[r(s(o.payroll.employee.name),1)]),_:1})]),_:1},8,["href"])]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Base Salary")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(l(_)+" "+parseInt(o.payroll.base).toLocaleString()),1)]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Total Deductions")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(l(_)+" "+parseInt(o.payroll.total_deductions).toLocaleString()),1)]),_:1})]),_:1}),e(d,{colored:""},{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Total Additions")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(l(_)+" "+parseInt(o.payroll.total_additions).toLocaleString()),1)]),_:1})]),_:1}),e(d,{colored:""},{default:t(()=>[e(c,{class:"inline"},{default:t(()=>[r(s(l(a)("Performance Multiplier")),1)]),_:1}),e(F,null,{default:t(()=>[r(s(l(a)("Based on employee's performance metrics filled,")),1),p[2]||(p[2]=m("br",null,null,-1)),r(" "+s(l(a)("the multiplier value increases or decreases affecting the entire payroll's total amount.")),1)]),_:1}),e(f,null,{default:t(()=>[r(s((o.payroll.performance_multiplier*100).toFixed(2))+"%",1)]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Total Payable")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(l(_)+" "+parseInt(o.payroll.total_payable).toLocaleString()),1)]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Due Date")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(o.payroll.due_date),1)]),_:1})]),_:1}),e(d,{colored:""},{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Reviewed?")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(o.payroll.is_reviewed?l(a)("Reviewed"):l(a)("Not Reviewed")),1)]),_:1})]),_:1}),e(d,{colored:""},{default:t(()=>[e(c,null,{default:t(()=>[r(s(l(a)("Status")),1)]),_:1}),e(f,null,{default:t(()=>[r(s(o.payroll.status?l(a)("Paid"):l(a)("Pending")),1)]),_:1})]),_:1})]),_:1}),h.$page.props.auth.user.roles.includes("admin")?(n(),w("div",re,[e(b,{class:"mb-4",href:h.route("payrolls.show",{id:o.payroll.id-1}),text:l(a)("Previous Payroll")},{default:t(()=>[y?(n(),u(D,{key:0})):(n(),u(T,{key:1}))]),_:1},8,["href","text"]),e(b,{class:"mb-4",href:h.route("payrolls.show",{id:o.payroll.id+1}),text:l(a)("Next Payroll"),IconAfter:""},{default:t(()=>[y?(n(),u(T,{key:0})):(n(),u(D,{key:1}))]),_:1},8,["href","text"])])):v("",!0)])]),_:1})])])]),_:1})],64))}};export{xe as default};
